<!DOCTYPE html>
<html>
<head>
    <title>Admin Controls</title>
</head>
<body>
    <h1>Admin Controls</h1>

    <p>Leaderboard Entries: <span id="leaderboardCount">Loading...</span></p>
    <form action="/admin" method="post">
        <button name="action" value="clear_leaderboard">Clear Leaderboard</button>
    </form>

    <p>Submission Status: <span id="submissionStatus">Unknown</span></p>

    <button id="startButton">Start Submissions</button>
    <button id="pauseButton">Pause Submissions</button>

    <script>
        // Fetch and update the leaderboard count
        function updateLeaderboardCount() {
            fetch("/get_leaderboard_count")
                .then(response => response.json())
                .then(data => {
                    document.getElementById("leaderboardCount").textContent = data.count;
                })
                .catch(error => {
                    console.error("Error fetching leaderboard count:", error);
                    document.getElementById("leaderboardCount").textContent = "Error";
                });
        }

        // Fetch and update the submission status
        function updateSubmissionStatus() {
            fetch("/get_submission_status")
                .then(response => response.json())
                .then(data => {
                    document.getElementById("submissionStatus").textContent = data.status ? "Enabled" : "Disabled";
                })
                .catch(error => {
                    console.error("Error fetching submission status:", error);
                    document.getElementById("submissionStatus").textContent = "Error";
                });
        }

        // Button event listeners
        document.getElementById("startButton").addEventListener("click", () => {
            fetch("/start_submissions", { method: "POST" })
                .then(response => response.json())
                .then(data => {
                    alert(data.message);
                    updateSubmissionStatus();
                });
        });

        document.getElementById("pauseButton").addEventListener("click", () => {
            fetch("/pause_submissions", { method: "POST" })
                .then(response => response.json())
                .then(data => {
                    alert(data.message);
                    updateSubmissionStatus();
                });
        });

        // Fetch current status and leaderboard count on page load
        updateSubmissionStatus();
        updateLeaderboardCount();
    </script>
</body>
</html>
